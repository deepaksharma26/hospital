"use strict";(self.webpackChunktemh=self.webpackChunktemh||[]).push([[34],{12902:(e,a,s)=>{s.d(a,{a:()=>n});var r=s(53969),i=s(80172),l=s(28549),t=s(70579);const n=e=>{let{open:a,handleClose:s}=e;return(0,t.jsx)(l.A,{open:a,onClose:s,children:(0,t.jsxs)(r.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",p:4,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,t.jsx)(i.A,{}),(0,t.jsx)("p",{style:{marginTop:"16px"},children:"Loading data..."})]})})}},29034:(e,a,s)=>{s.r(a),s.d(a,{default:()=>R});var r=s(38517),i=s(81911),l=s(78776),t=s(53089),n=s(24343),d=s(10256),o=s(79067),c=s(84481),u=s(47471),m=s(85877),h=s(12097),f=s(83759),x=s(53969),g=s(94799),v=s(55895),b=s(32911),p=s(91449),A=s(65043),j=s(83003),w=s(12438),y=s(75023),C=s(53878),k=s(73216),S=s(12902),W=s(60637),U=s(61773),N=s(40146),I=s(70579);const M=e=>{let{open:a,handleClose:s,handleSubmit:f,form:x,setForm:g,roles:v,isEdit:b}=e;return(0,I.jsxs)(r.A,{open:a,onClose:s,maxWidth:"sm",fullWidth:!0,children:[(0,I.jsx)(i.A,{sx:{background:"linear-gradient(90deg, #43cea2 0%, #185a9d 100%)",color:"#fff"},children:b?"Update Existing User":"Add New User"}),(0,I.jsx)(l.A,{sx:{py:3},children:(0,I.jsxs)(t.A,{container:!0,spacing:2,sx:{width:"100%",mt:2},children:[(0,I.jsx)(t.A,{item:!0,xs:12,sm:6,children:(0,I.jsx)(n.A,{label:"First Name",name:"firstname",value:x.firstname,onChange:e=>g({...x,firstname:e.target.value}),fullWidth:!0,required:!0,variant:"outlined"})}),(0,I.jsx)(t.A,{item:!0,xs:12,sm:6,children:(0,I.jsx)(n.A,{label:"Last Name",name:"lastname",value:x.lastname,onChange:e=>g({...x,lastname:e.target.value}),fullWidth:!0,required:!0,variant:"outlined"})}),(0,I.jsx)(t.A,{item:!0,xs:12,sm:6,children:(0,I.jsx)(n.A,{label:"Email",name:"email",value:x.email,onChange:e=>g({...x,email:e.target.value}),fullWidth:!0,required:!0,variant:"outlined",type:"email"})}),(0,I.jsx)(t.A,{item:!0,xs:12,sm:6,children:(0,I.jsx)(n.A,{label:"Mobile",name:"mobilenumber",value:x.mobilenumber,onChange:e=>g({...x,mobilenumber:e.target.value}),fullWidth:!0,required:!0,variant:"outlined"})}),!b&&(0,I.jsx)(t.A,{item:!0,xs:12,sm:6,children:(0,I.jsx)(n.A,{label:"Password",name:"password",value:x.password,onChange:e=>g({...x,password:e.target.value}),fullWidth:!0,required:!0,variant:"outlined",type:"password"})}),(0,I.jsx)(t.A,{item:!0,xs:12,sm:6,children:(0,I.jsxs)(d.A,{fullWidth:!0,children:[(0,I.jsx)(o.A,{id:"role-label",children:"Role"}),(0,I.jsxs)(c.A,{labelId:"role-label",label:"Role",value:x.role,onChange:e=>g({...x,role:e.target.value}),required:!0,sx:{width:"150px"},children:[(0,I.jsx)(u.A,{value:"",children:"Select Role"}),v&&v.map(e=>(0,I.jsx)(u.A,{value:e._id,children:e.rolename},e._id))]})]})}),(0,I.jsx)(t.A,{item:!0,xs:12,sm:6,children:(0,I.jsxs)(d.A,{fullWidth:!0,children:[(0,I.jsx)(o.A,{id:"status-label",children:"Status"}),(0,I.jsxs)(c.A,{labelId:"status-label",label:"Status",value:x.status,onChange:e=>g({...x,status:e.target.value}),required:!0,sx:{width:"150px"},children:[(0,I.jsx)(u.A,{value:1,children:"Active"}),(0,I.jsx)(u.A,{value:9,children:"Inactive"})]})]})})]})}),(0,I.jsxs)(m.A,{sx:{px:3,pb:2},children:[(0,I.jsx)(h.A,{onClick:s,color:"secondary",variant:"outlined",children:"Cancel"}),(0,I.jsx)(h.A,{onClick:f,variant:"contained",color:"primary",startIcon:b?(0,I.jsx)(U.A,{}):(0,I.jsx)(N.A,{}),sx:{fontWeight:700,background:b?"linear-gradient(90deg, #f7971e 0%, #ffd200 100%)":"linear-gradient(90deg, #43cea2 0%, #185a9d 100%)",color:"#fff",boxShadow:2,"&:hover":{background:b?"linear-gradient(90deg, #ffd200 0%, #f7971e 100%)":"linear-gradient(90deg, #185a9d 0%, #43cea2 100%)"}},children:b?"Update":"Add"})]})]})},R=()=>{const{roles:e}=(0,j.d4)(e=>e.userRole),a=(0,j.d4)(e=>e.userList.data),{loading:s}=(0,j.d4)(e=>e.updateUser),r=(0,j.wA)(),[i,l]=((0,k.Zp)(),(0,A.useState)(!1)),[n,d]=(0,A.useState)(!1),[o,c]=(0,A.useState)({firstname:"",lastname:"",email:"",mobilenumber:"",password:"",role:"",status:1}),[u,m]=(0,A.useState)(!1),[U,N]=(0,A.useState)(null),[R,E]=(0,A.useState)({open:!1,message:"",severity:"success"});(0,A.useEffect)(()=>{r((0,w.P)({})),r((0,C.X)({}))},[r]);const _=()=>E({...R,open:!1}),q=[{field:"id",headerName:"ID",width:40},{field:"firstname",headerName:"First Name",width:150},{field:"lastname",headerName:"Last Name",width:150},{field:"email",headerName:"Email",width:150},{field:"mobilenumber",headerName:"Mobile",width:140},{field:"role",headerName:"Role",width:100},{field:"status",renderCell:e=>(0,I.jsx)(f.A,{sx:{width:80},label:e.value,color:"Active"==e.value?"success":"error"}),headerName:"Status",width:120},{field:"",renderCell:a=>{var s,r;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(h.A,{label:"Modify",variant:"outlined",color:"warning",onClick:()=>(a=>{var s;c({id:a._id,role:(null===(s=e.find(e=>e._id===a.role))||void 0===s?void 0:s._id)||a.role||"",firstname:a.firstname,lastname:a.lastname,email:a.email,mobilenumber:a.mobilenumber,password:"",status:"Active"===a.status||1===a.status?1:9}),m(!0),N(a._id),d(!0)})(a.row),children:"Modify"}),(0,I.jsx)(h.A,{label:"Modify",variant:"outlined",color:"Active"==(null===(s=a.row)||void 0===s?void 0:s.status)?"success":"error",onClick:()=>L(a),sx:{marginLeft:1},children:"Active"==(null===(r=a.row)||void 0===r?void 0:r.status)?"InActive":"Activate"})]})},headerName:"Modify",width:230}],D=a.map((e,a)=>{var s,r,i;return{...e,id:null!==(s=e.id)&&void 0!==s?s:a+1,role:null!==e&&void 0!==e&&null!==(r=e.role)&&void 0!==r&&r.rolename?null===e||void 0===e||null===(i=e.role)||void 0===i?void 0:i.rolename:"Unknown",status:1==e.status?"Active":"Inactive"}}),L=a=>{var s;const i=a.row,l="Active"===i.status?9:1,t={id:i._id,firstname:i.firstname,lastname:i.lastname,email:i.email,mobilenumber:i.mobilenumber,role:null===(s=e.find(e=>e.rolename==i.role))||void 0===s?void 0:s._id,status:l};r((0,W.TK)(t)).then(()=>{r((0,w.P)({})),E({open:!0,message:`User ${1===l?"activated":"deactivated"} successfully!`,severity:"success"})})};return(0,I.jsxs)(x.A,{sx:{width:"100%",background:"#f8fafc",minHeight:"100vh"},children:[(0,I.jsxs)(g.A,{elevation:3,sx:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",p:{xs:2,sm:3},mb:3,borderRadius:3,background:"linear-gradient(90deg, #43cea2 0%, #185a9d 100%)",color:"#fff",boxShadow:4},children:[(0,I.jsx)(v.A,{variant:"h5",fontWeight:"bold",sx:{letterSpacing:1},children:"\ud83d\udc64 List of All Users"}),(0,I.jsxs)(x.A,{sx:{display:"flex",gap:2,mt:{xs:2,sm:0}},children:[(0,I.jsx)(h.A,{variant:"contained",color:"primary",onClick:()=>r((0,w.P)({})),sx:{fontWeight:700,background:"linear-gradient(90deg, #11998e 0%, #38ef7d 100%)",color:"#fff",boxShadow:2,"&:hover":{background:"linear-gradient(90deg, #38ef7d 0%, #11998e 100%)"}},children:"Refresh"}),(0,I.jsx)(h.A,{variant:"contained",color:"secondary",onClick:()=>{c({firstname:"",lastname:"",email:"",mobilenumber:"",password:"",role:"",status:1}),m(!1),N(null),d(!0)},sx:{fontWeight:700,background:"linear-gradient(90deg, #f7971e 0%, #ffd200 100%)",color:"#fff",boxShadow:2,"&:hover":{background:"linear-gradient(90deg, #ffd200 0%, #f7971e 100%)"}},children:"Add User"}),(0,I.jsx)(h.A,{variant:"contained",color:"success",onClick:()=>{const e="data:text/csv;charset=utf-8,"+q.map(e=>e.headerName).join(",")+"\n"+D.map(e=>q.map(a=>e[a.field]).join(",")).join("\n"),a=encodeURI(e),s=document.createElement("a");s.setAttribute("href",a),s.setAttribute("download","users.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},sx:{fontWeight:700,background:"linear-gradient(90deg, #43cea2 0%, #185a9d 100%)",color:"#fff",boxShadow:2,"&:hover":{background:"linear-gradient(90deg, #185a9d 0%, #43cea2 100%)"}},children:"Export Users"})]})]}),(0,I.jsx)(t.A,{item:!0,xs:12,sx:{justifyContent:"center",display:"flex",marginTop:"20px"},children:(0,I.jsx)(g.A,{elevation:2,sx:{width:"100%",borderRadius:3,boxShadow:2,p:{xs:1,sm:2},background:"#fff",overflow:"hidden"},children:(0,I.jsx)(y.z,{rows:D,columns:q,initialState:{pagination:{paginationModel:{pageSize:5,page:0}}},pageSizeOptions:[5,10,20,50,100],sx:{border:0,width:"100%",fontSize:{xs:"0.9rem",sm:"1rem"},".MuiDataGrid-columnHeaders":{background:"linear-gradient(90deg, #43cea2 0%, #185a9d 100%)",fontWeight:700,fontSize:"1rem"},".MuiDataGrid-row:hover":{background:"rgba(67,206,162,0.08)",transition:"background 0.2s"}}})})}),(0,I.jsx)(M,{open:n,handleClose:()=>d(!1),handleSubmit:async e=>{e.preventDefault();try{u?r((0,W.TK)(o)).then(e=>{e.error?E({open:!0,message:"Update failed",severity:"error"}):(r((0,w.P)({})),c({firstname:"",lastname:"",email:"",mobilenumber:"",password:"",role:"",status:1}),E({open:!0,message:"User updated successfully!",severity:"success"}),m(!1),N(null))}):r((0,W.nu)(o)).then(e=>{e.error?E({open:!0,message:"User addition failed",severity:"error"}):(r((0,w.P)({})),c({firstname:"",lastname:"",email:"",mobilenumber:"",password:"",role:"",status:1}),E({open:!0,message:"User added successfully!",severity:"success"}))}),d(!1)}catch{E({open:!0,message:"Operation failed",severity:"error"})}},form:o,setForm:c,roles:e,isEdit:u}),(0,I.jsx)(b.A,{open:R.open,autoHideDuration:6e3,onClose:_,children:(0,I.jsx)(p.A,{onClose:_,severity:R.severity,sx:{width:"100%"},children:R.message})}),(0,I.jsx)(S.a,{open:i})]})}}}]);
//# sourceMappingURL=34.a17528c8.chunk.js.map