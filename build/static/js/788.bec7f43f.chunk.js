"use strict";(self.webpackChunktemh=self.webpackChunktemh||[]).push([[788],{98788:(e,r,i)=>{i.r(r),i.d(r,{default:()=>k});var a=i(65043),n=i(85030),t=i(56647),o=i(53969),s=i(55895),l=i(12097),d=i(94799),c=i(30998),g=i(66154),h=i(33023),u=i(81911),f=i(78776),x=i(85877),m=i(32911),p=i(91449),b=i(3388),y=i(61773),A=i(5362),j=i(40146),v=i(83003),C=i(88998),w=(i(61066),i(26004),i(70579));const k=()=>{const[e,r]=(0,a.useState)([]),[i,k]=(0,a.useState)({id:"",name:"",description:""}),[S,W]=(0,a.useState)(null),[D,R]=(0,a.useState)(!1),[z,N]=(0,a.useState)(null),[B,F]=(0,a.useState)({open:!1,message:"",severity:"success"}),M=(0,v.wA)(),{billingCategory:H}=(0,v.d4)(e=>e.billingCategory);(0,a.useEffect)(()=>{M((0,C.ss)()).then(e=>{e.payload?r(e.payload):console.error("Failed to fetch categories:",e.error)})},[M]);const O=e=>{k({...i,[e.target.name]:e.target.value})},_=[{field:"name",headerName:"Category Name",flex:1,minWidth:180},{field:"description",headerName:"Description",flex:2,minWidth:220},{field:"isActive",headerName:"Status",flex:2,minWidth:220,renderCell:e=>(0,w.jsx)(n.A,{checked:e.row.isActive,color:e.row.isActive?"success":"error"})},{field:"actions",headerName:"Actions",width:140,sortable:!1,renderCell:e=>(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(t.A,{color:"primary",onClick:()=>{return r=e.row,k({id:r._id,name:r.name,description:r.description}),W(r._id),void window.scrollTo({top:0,behavior:"smooth"});var r},children:(0,w.jsx)(y.A,{})}),(0,w.jsx)(t.A,{color:"error",onClick:()=>N(e.row._id),children:(0,w.jsx)(A.A,{})})]})}];return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(o.A,{sx:{display:"flex",border:"1px solid #ccc",backgroundColor:"#f5f5f5",padding:"10px"},children:[(0,w.jsx)(s.A,{variant:"h5",color:"textSecondary",children:"Manage Billings Categories"}),(0,w.jsx)(l.A,{variant:"contained",color:"primary",sx:{marginLeft:"auto"},onClick:()=>M((0,C.ss)({})),children:"Refresh"})]}),(0,w.jsxs)(o.A,{sx:{maxWidth:900,mx:"auto",p:{xs:1,sm:2}},children:[(0,w.jsxs)(d.A,{sx:{p:3,mb:4,background:"linear-gradient(90deg, #43cea2 0%, #185a9d 100%)",color:"#fff",borderRadius:3,boxShadow:4},children:[(0,w.jsx)(s.A,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:S?"Update Billing Category":"Create Billing Category"}),(0,w.jsx)("form",{onSubmit:async e=>{e.preventDefault();try{S?M((0,C.Vh)(i)).then(()=>{M((0,C.ss)()),F({open:!0,message:"Category updated!",severity:"success"})}):M((0,C.WM)(i)).then(()=>{M((0,C.ss)()),F({open:!0,message:"Category created!",severity:"success"})}),k({name:"",description:""}),W(null)}catch(r){F({open:!0,message:"Operation failed",severity:"error"})}},children:(0,w.jsxs)(c.A,{container:!0,spacing:2,alignItems:"center",children:[(0,w.jsx)(c.A,{item:!0,xs:12,sm:5,children:(0,w.jsx)(g.A,{label:"Category Name",name:"name",value:i.name,onChange:O,fullWidth:!0,required:!0,variant:"filled",sx:{background:"rgba(255,255,255,0.15)",borderRadius:1,input:{color:"#fff",fontWeight:600},label:{color:"#fff"}}})}),(0,w.jsx)(c.A,{item:!0,xs:12,sm:5,children:(0,w.jsx)(g.A,{label:"Description",name:"description",value:i.description,onChange:O,fullWidth:!0,variant:"filled",sx:{background:"rgba(255,255,255,0.15)",borderRadius:1,input:{color:"#fff"},label:{color:"#fff"}}})}),(0,w.jsx)(c.A,{item:!0,xs:12,sm:2,children:(0,w.jsx)(l.A,{type:"submit",variant:"contained",color:S?"warning":"secondary",startIcon:(0,w.jsx)(j.A,{}),fullWidth:!0,sx:{height:56,fontWeight:700,fontSize:16,background:S?"linear-gradient(90deg, #f7971e 0%, #ffd200 100%)":"linear-gradient(90deg, #ff9966 0%, #ff5e62 100%)",color:"#fff",boxShadow:2,"&:hover":{background:S?"linear-gradient(90deg, #ffd200 0%, #f7971e 100%)":"linear-gradient(90deg, #ff5e62 0%, #ff9966 100%)"}},children:S?"Update":"Create"})})]})})]}),(0,w.jsxs)(d.A,{sx:{p:2,borderRadius:3,boxShadow:2},children:[(0,w.jsx)(s.A,{variant:"h6",fontWeight:"bold",sx:{mb:2},children:"Billing Categories"}),(0,w.jsx)("div",{style:{width:"100%",minHeight:350},children:(0,w.jsx)(b.z,{rows:H,columns:_,getRowId:e=>e._id,pageSize:7,rowsPerPageOptions:[7,15,30],autoHeight:!0,disableSelectionOnClick:!0,sx:{background:"rgba(255,255,255,0.97)",borderRadius:2,"& .MuiDataGrid-columnHeaders":{background:"linear-gradient(90deg, #43cea2 0%, #185a9d 100%)",fontWeight:700,fontSize:16},"& .MuiDataGrid-row:hover":{background:"rgba(67,206,162,0.08)"},"& .MuiDataGrid-cell":{fontSize:15}}})})]}),(0,w.jsxs)(h.A,{open:!!z,onClose:()=>N(null),children:[(0,w.jsx)(u.A,{children:"Delete Category?"}),(0,w.jsx)(f.A,{children:"Are you sure you want to delete this billing category? This action cannot be undone."}),(0,w.jsxs)(x.A,{children:[(0,w.jsx)(l.A,{onClick:()=>N(null),color:"primary",children:"Cancel"}),(0,w.jsx)(l.A,{onClick:async()=>{M((0,C.Tr)(z)).then(e=>{e.error?F({open:!0,message:"Failed to delete category",severity:"error"}):(F({open:!0,message:"Category deleted!",severity:"success"}),N(null),M((0,C.ss)()))}).catch(e=>{F({open:!0,message:"Failed to delete category",severity:"error"})})},color:"error",variant:"contained",children:"Delete"})]})]}),(0,w.jsx)(m.A,{open:B.open,autoHideDuration:3e3,onClose:()=>F({...B,open:!1}),anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,w.jsx)(p.A,{severity:B.severity,sx:{width:"100%"},children:B.message})})]})]})}}}]);
//# sourceMappingURL=788.bec7f43f.chunk.js.map