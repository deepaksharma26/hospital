"use strict";(self.webpackChunktemh=self.webpackChunktemh||[]).push([[34],{12902:(e,t,o)=>{o.d(t,{a:()=>s});var r=o(53969),n=o(80172),i=o(25860),a=o(70579);const s=e=>{let{open:t,handleClose:o}=e;return(0,a.jsx)(i.A,{open:t,onClose:o,children:(0,a.jsxs)(r.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",p:4,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,a.jsx)(n.A,{}),(0,a.jsx)("p",{style:{marginTop:"16px"},children:"Loading data..."})]})})}},29034:(e,t,o)=>{o.r(t),o.d(t,{default:()=>g});var r=o(83759),n=o(12097),i=o(53969),a=o(55895),s=o(30998),d=o(94799),l=o(65043),c=o(83003),u=o(12438),m=o(52936),h=o(53878),f=o(73216),x=o(86064),p=o(60637),v=o(12902),w=o(70579);const g=()=>{(0,x.Xw)();const e=(0,c.d4)(e=>e.userRole.roles),t=(0,c.d4)(e=>e.userList.data),{loading:o,error:g}=(0,c.d4)(e=>e.updateUser),A=(0,c.wA)(),j=(0,f.Zp)(),[y,b]=l.useState(!1);(0,l.useEffect)(()=>{A((0,u.P)({})).then(e=>{null!==e&&void 0!==e&&e.payload?A((0,h.X)({})):console.error("Failed to fetch users:",e.error)})},[]);const C=[{field:"id",headerName:"ID",width:90},{field:"firstname",headerName:"First Name",width:150},{field:"lastname",headerName:"Last Name",width:150},{field:"email",headerName:"Email",width:300},{field:"role",headerName:"Role",width:150},{field:"status",renderCell:e=>(0,w.jsx)(r.A,{sx:{width:80},label:e.value,color:"Active"==e.value?"success":"error"}),headerName:"Status",width:120},{field:"",renderCell:t=>{var r,i;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(n.A,{label:"Modify",variant:"outlined",color:"warning",onClick:()=>(t=>{const o=t.row._id,r=k.find(e=>e._id===o);r?(console.log("User data to modify:",r),j(`/modify-user/${o}`,{state:{user:r,role:e}})):console.error("User not found for modification:",o)})(t),children:"Modify"}),(0,w.jsx)(n.A,{label:"Modify",variant:"outlined",color:"Active"==(null===(r=t.row)||void 0===r?void 0:r.status)?"success":"error",onClick:()=>(e=>{b(!0);const t=e.row._id,r=k.find(e=>e._id===t);if(t){const e={firstname:r.firstname,lastname:r.lastname,mobilenumber:r.mobilenumber,email:r.email,role:r.role,status:1==r.status?0:1};A((0,p.TK)(t,e)).then(e=>{e.error||o||A((0,u.P)({})).then(()=>{b(!1)})})}else console.error("User not found for marking active:",t)})(t),sx:{marginLeft:1},children:"Active"==(null===(i=t.row)||void 0===i?void 0:i.status)?"InActive":"Activate"})]})},headerName:"Modify",width:280}],k=t.map((e,t)=>{var o,r,n;return{...e,id:null!==(o=e.id)&&void 0!==o?o:t+1,role:null!==e&&void 0!==e&&null!==(r=e.role)&&void 0!==r&&r.rolename?null===e||void 0===e||null===(n=e.role)||void 0===n?void 0:n.rolename:"Unknown",status:1==e.status?"Active":"Inactive"}});return(0,w.jsxs)(i.A,{sx:{width:"100%"},children:[(0,w.jsxs)(i.A,{sx:{display:"flex",border:"1px solid #ccc",backgroundColor:"#f5f5f5",padding:"10px",marginBottom:"20px"},children:[(0,w.jsx)(a.A,{variant:"h5",color:"textSecondary",children:"List of All Users"}),(0,w.jsx)(n.A,{variant:"contained",color:"primary",sx:{marginLeft:"auto"},onClick:()=>A((0,u.P)({})),children:"Refresh"}),(0,w.jsx)(n.A,{variant:"contained",color:"secondary",sx:{marginLeft:"10px"},onClick:()=>window.location.href="/add-user",children:"Add User"}),(0,w.jsx)(n.A,{variant:"contained",color:"success",sx:{marginLeft:"10px"},onClick:()=>(()=>{const e="data:text/csv;charset=utf-8,"+C.map(e=>e.headerName).join(",")+"\n"+k.map(e=>C.map(t=>e[t.field]).join(",")).join("\n"),t=encodeURI(e),o=document.createElement("a");o.setAttribute("href",t),o.setAttribute("download","users.csv"),document.body.appendChild(o),o.click(),document.body.removeChild(o)})(),children:"Export Users"})]}),(0,w.jsx)(s.A,{item:!0,xs:12,sx:{justifyContent:"center",display:"flex",marginTop:"20px"},children:(0,w.jsx)(d.A,{sx:{width:"100%"},children:(0,w.jsx)(m.z,{rows:k,columns:C,initialState:{pagination:{paginationModel:{pageSize:5,page:0}}},pageSizeOptions:[5,10],sx:{border:0,width:"100%"}})})}),(0,w.jsx)(v.a,{open:y})]})}},86064:(e,t,o)=>{o.d(t,{MW:()=>i,Xw:()=>a,Yq:()=>r,r7:()=>n});const r=e=>new Date(e).toLocaleDateString(void 0,{day:"numeric",month:"long",year:"numeric"}),n=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(e).toLowerCase()),i=e=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(String(e)),a=()=>window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}}]);
//# sourceMappingURL=34.bd6237ba.chunk.js.map