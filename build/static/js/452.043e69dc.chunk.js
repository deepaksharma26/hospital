"use strict";(self.webpackChunktemh=self.webpackChunktemh||[]).push([[452],{12902:(e,t,l)=>{l.d(t,{a:()=>o});var n=l(53969),i=l(80172),a=l(25860),r=l(70579);const o=e=>{let{open:t,handleClose:l}=e;return(0,r.jsx)(a.A,{open:t,onClose:l,children:(0,r.jsxs)(n.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",p:4,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)(i.A,{}),(0,r.jsx)("p",{style:{marginTop:"16px"},children:"Loading data..."})]})})}},63452:(e,t,l)=>{l.r(t),l.d(t,{default:()=>v});var n=l(65043),i=l(55895),a=l(12097),r=l(53969),o=l(30998),d=l(94799),s=l(73216),c=l(83003),h=l(61066),u=l(17193),x=l(52936),m=(l(26004),l(12902)),f=l(70579);const v=()=>{const[e,t]=(0,n.useState)(!1),l=((0,s.Zp)(),(0,c.wA)()),{billings:v}=(0,c.d4)(e=>e.billing),[p,A]=(0,n.useState)(!1);(0,n.useEffect)(async()=>{t(!0),await l((0,h.CD)()),t(!1)},[l]);const g=[{field:"id",headerName:"ID",width:40,renderCell:e=>(0,f.jsx)(i.A,{variant:"subtitle1",color:"textSecondary",children:e.value||"N/A"})},{field:"userId",headerName:"Customer ID",width:150,renderCell:e=>(0,f.jsx)(i.A,{variant:"subtitle1",color:"textSecondary",children:e.value||"N/A"})},{field:"customerName",headerName:"Customer Name",width:150,renderCell:e=>(0,f.jsx)(i.A,{variant:"subtitle1",color:"textSecondary",children:e.value||"N/A"})},{field:"customerPhone",headerName:"Phone",width:100,renderCell:e=>(0,f.jsx)(i.A,{variant:"subtitle1",color:"textSecondary",children:e.value||"N/A"})},{field:"customerAddress",headerName:"Address",width:150,renderCell:e=>(0,f.jsx)(i.A,{variant:"subtitle1",color:"textSecondary",children:e.value||"N/A"})},{field:"taxAmount",headerName:"Tax",width:90,renderCell:e=>(0,f.jsx)(i.A,{variant:"subtitle1",fontWeight:"bold",color:"textSecondary",children:e.value?e.value.toFixed(2):"0.00"})},{field:"discountAmount",headerName:"Discount",width:90,renderCell:e=>(0,f.jsx)(i.A,{variant:"subtitle1",fontWeight:"bold",color:"textSecondary",children:e.value?e.value.toFixed(2):"0.00"})},{field:"billingDate",headerName:"Billing Date",width:100,renderCell:e=>(0,f.jsx)(i.A,{variant:"subtitle1",color:"textSecondary",children:new Date(e.value).toLocaleDateString()})},{field:"totalAmount",headerName:"Total Amount",renderCell:e=>(0,f.jsx)(i.A,{variant:"subtitle1",fontWeight:"bold",color:"textSecondary",children:e.value?e.value.toFixed(2):"0.00"}),width:90},{field:"finalAmount",headerName:"Final Amount",renderCell:e=>(0,f.jsx)(i.A,{variant:"subtitle1",fontWeight:"bold",color:"textSecondary",children:e.value?e.value.toFixed(2):"0.00"}),width:90},{field:"paymentMethodDetails",headerName:"Payment Method",width:150},{field:"",renderCell:e=>(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.A,{label:"Modify",variant:"outlined",color:"warning",onClick:()=>window.open(`${u.K.EDITBILLING}/${e.row._id}`,"_blank"),children:"Modify"}),(0,f.jsx)(a.A,{label:"Print",variant:"outlined",color:"primary",sx:{marginLeft:1},children:"Print"})]}),headerName:"Modify",width:280}],b=v.map((e,t)=>{var l,n,i;return{...e,id:null!==(l=e.id)&&void 0!==l?l:t+1,role:null!==e&&void 0!==e&&null!==(n=e.role)&&void 0!==n&&n.rolename?null===e||void 0===e||null===(i=e.role)||void 0===i?void 0:i.rolename:"Unknown",status:1==e.status?"Active":"Inactive"}});return(0,f.jsxs)(r.A,{sx:{width:"100%"},children:[(0,f.jsxs)(r.A,{sx:{display:"flex",border:"1px solid #ccc",backgroundColor:"#f5f5f5",padding:"10px",marginBottom:"20px"},children:[(0,f.jsx)(i.A,{variant:"h5",color:"textSecondary",children:"List of All Billings"}),(0,f.jsx)(a.A,{variant:"contained",color:"primary",sx:{marginLeft:"auto"},onClick:()=>l((0,h.CD)({})),children:"Refresh"}),(0,f.jsx)(a.A,{variant:"contained",color:"secondary",sx:{marginLeft:"10px"},onClick:()=>window.location.href=u.K.BILLING,children:"Add New Billing"}),(0,f.jsx)(a.A,{variant:"contained",color:"success",sx:{marginLeft:"10px"},onClick:()=>(()=>{const e="data:text/csv;charset=utf-8,"+g.map(e=>e.headerName).join(",")+"\n"+b.map(e=>g.map(t=>e[t.field]).join(",")).join("\n"),t=encodeURI(e),l=document.createElement("a");l.setAttribute("href",t),l.setAttribute("download",`billings${(new Date).toISOString().slice(0,10)}.csv`),document.body.appendChild(l),l.click(),document.body.removeChild(l)})(),children:"Export Billings"})]}),(0,f.jsx)(o.A,{item:!0,xs:12,sx:{justifyContent:"center",display:"flex",marginTop:"20px"},children:(0,f.jsx)(d.A,{sx:{width:"100%"},children:(0,f.jsx)(x.z,{rows:b,columns:g,initialState:{pagination:{paginationModel:{pageSize:5,page:0}}},pageSizeOptions:[5,10],sx:{border:0,width:"100%"}})})}),(0,f.jsx)(m.a,{open:p})]})}}}]);
//# sourceMappingURL=452.043e69dc.chunk.js.map