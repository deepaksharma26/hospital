"use strict";(self.webpackChunktemh=self.webpackChunktemh||[]).push([[879],{17463:(e,t,n)=>{n.d(t,{A:()=>S});var r=n(65043),a=n(53969),s=n(47548),o=n(23182),i=n(95315),l=n(26529),c=n(42455),x=n(79801),d=n(66185),h=n(55895),p=n(87721),u=n(49982),m=n(39841),f=n(17105),g=n(91921),b=n(65767),A=n(73216),j=n(17193),v=n(70579);const w=[{label:"Dashboard",icon:(0,v.jsx)(p.A,{}),path:j.K.DASHBOARD,color:"#43cea2"},{label:"Users",icon:(0,v.jsx)(u.A,{}),path:j.K.LIST_ALL_USERS,color:"#ff9966"},{label:"Billing",icon:(0,v.jsx)(g.A,{}),path:j.K.BILLING,color:"#f7971e"},{label:"Billing Item",icon:(0,v.jsx)(m.A,{}),path:j.K.BILLING_ITEM,color:"#b91d73"},{label:"Billing Category",icon:(0,v.jsx)(m.A,{}),path:j.K.BILLING_CATEGORY,color:"#11998e"},{label:"Financial Year",icon:(0,v.jsx)(f.A,{}),path:j.K.FINANCIALYEAR,color:"#185a9d"},{label:"Logout",icon:(0,v.jsx)(b.A,{}),path:"/logout",logout:!0,color:"#ff5e62"}],S=e=>{let{onLogout:t}=e;const p=(0,A.Zp)(),u=(0,A.zy)(),[m,f]=(0,r.useState)(null);return(0,v.jsx)(a.A,{sx:{width:{xs:70,sm:220},flexShrink:0,top:0,left:0,marginTop:{xs:0,sm:"64px"},background:"linear-gradient(180deg, #f5f7fa 0%, #c3cfe2 100%)",minHeight:"100vh",boxShadow:4,position:"fixed",zIndex:1200,height:"100vh",overflow:"hidden"},children:(0,v.jsxs)(s.Ay,{variant:"permanent",sx:{width:{xs:70,sm:220},flexShrink:0,top:0,position:"relative","& .MuiDrawer-paper":{width:{xs:70,sm:220},boxSizing:"border-box",background:"linear-gradient(180deg, #f5f7fa 0%, #c3cfe2 100%)",borderRight:"none",boxShadow:4,overflow:"hidden"},display:{xs:"block",sm:"block"}},children:[(0,v.jsx)(a.A,{sx:{marginTop:"10px",marginLeft:{xs:"auto",sm:"30px"},alignItems:"center",minWidth:60,height:"50px",display:"flex",justifyContent:{xs:"center",sm:"flex-start"}},children:(0,v.jsx)("img",{src:n(82806),alt:"User Icon",style:{width:48,height:48,filter:"drop-shadow(0 2px 8px #43cea2)",display:"block"}})}),(0,v.jsx)(o.A,{sx:{display:{xs:"none",sm:"block"}}}),(0,v.jsxs)(a.A,{sx:{overflow:"hidden",marginTop:{xs:0,sm:"-62px"},width:"100%"},children:[(0,v.jsx)(a.A,{sx:{height:"2px",borderBottom:"1px solid #CECECE",width:"100%"}}),(0,v.jsx)(i.A,{sx:{p:0},children:w.map((e,n)=>(0,v.jsx)(r.Fragment,{children:(0,v.jsx)(l.A,{title:e.label,placement:"right",arrow:!0,children:(0,v.jsxs)(c.Ay,{button:!0,onClick:()=>(e=>{e.logout?t():p(e.path)})(e),selected:u.pathname===e.path,onMouseEnter:()=>f(n),onMouseLeave:()=>f(null),sx:{position:"relative",color:u.pathname===e.path?"#fff":"text.primary",background:u.pathname===e.path?`linear-gradient(90deg, ${e.color} 0%, #185a9d 100%)`:m===n?"rgba(67,206,162,0.08)":"transparent",padding:{xs:"10px 8px",sm:"12px 24px"},margin:{xs:"4px 0",sm:"6px 0"},borderRadius:2,boxShadow:u.pathname===e.path?3:0,transition:"all 0.2s",minWidth:0,cursor:"pointer","&:active":{transform:"scale(0.98)"},"&:focus":{outline:"none",boxShadow:"0 0 0 2px rgba(67,206,162,0.5)"},"&:focus-visible":{boxShadow:"0 0 0 2px rgba(67,206,162,0.5)"},"&:active, &:hover":{background:u.pathname===e.path?`linear-gradient(90deg, ${e.color} 0%, #185a9d 100%)`:m===n?"rgba(67,206,162,0.08)":"transparent",color:u.pathname===e.path||m===n?"#fff":"text.primary"},"&:focus, &:hover":{background:u.pathname===e.path?`linear-gradient(90deg, ${e.color} 0%, #185a9d 100%)`:m===n?"rgba(67,206,162,0.08)":"transparent",color:u.pathname===e.path||m===n?"#fff":"text.primary"},"&:active, &:focus, &:hover":{boxShadow:u.pathname===e.path||m===n?2:0,transform:u.pathname===e.path||m===n?"scale(1.03)":"none"},"&:hover":{background:`linear-gradient(90deg, ${e.color} 0%, #185a9d 100%)`,color:"#fff",boxShadow:2,transform:"scale(1.03)"}},children:[(0,v.jsx)(x.A,{sx:{color:u.pathname===e.path||m===n?e.color:"#888",minWidth:0,mr:{xs:0,sm:2},justifyContent:"center",fontSize:24,filter:u.pathname===e.path||m===n?"drop-shadow(0 2px 8px #43cea2)":"none"},children:e.icon}),(0,v.jsx)(d.A,{primary:(0,v.jsx)(h.A,{sx:{fontWeight:700,fontSize:16,letterSpacing:.5,color:u.pathname===e.path||m===n?"#fff":"#222",textShadow:u.pathname===e.path||m===n?"0 2px 8px #43cea2":"none",transition:"color 0.2s",display:{xs:"none",sm:"block"}},children:e.label})})]})})},e.label))})]})]})})}},47228:(e,t,n)=>{n.d(t,{A:()=>y});var r=n(65043),a=n(26887),s=n(23182),o=n(53969),i=n(55895),l=n(56647),c=n(12097),x=n(38517),d=n(81911),h=n(78776),p=n(24343),u=n(85877),m=n(65767),f=n(8888),g=n(97250),b=n(78804),A=n(73216),j=n(83003),v=n(87018),w=n(70579);const S=900,y=()=>{const e=(0,A.Zp)(),[t,n]=(0,r.useState)(new Date),[y,k]=(0,r.useState)("Fetching..."),[I,L]=(0,r.useState)((0,b.me)()),[E,C]=(0,r.useState)(""),[W,T]=(0,r.useState)(""),[R,z]=(0,r.useState)(S),B=(0,r.useRef)(null),D=(0,r.useRef)(null),{data:F}=(0,j.d4)(e=>e.users),[H,P]=(0,r.useState)(""),[K,M]=(0,r.useState)(!1),[N,$]=(0,r.useState)(null),G=(0,j.wA)(),U=(0,r.useRef)(null);(0,r.useEffect)(()=>{const e=setInterval(()=>n(new Date),1e3);return()=>clearInterval(e)},[]),(0,r.useEffect)(()=>{fetch("https://api.ipify.org?format=json").then(e=>e.json()).then(e=>k(e.ip)).catch(()=>k("Unavailable"))},[]),(0,r.useEffect)(()=>{const e=()=>{z(S),B.current&&clearTimeout(B.current),D.current&&clearInterval(D.current),D.current=setInterval(()=>{z(e=>e<=1?(clearInterval(D.current),(0,b.S_)(!0),L(!0),0):e-1)},1e3),B.current=setTimeout(()=>{L(!0),clearInterval(D.current)},9e5)},t=["mousemove","keydown","mousedown","touchstart","scroll"];return t.forEach(t=>window.addEventListener(t,e)),e(),()=>{t.forEach(t=>window.removeEventListener(t,e)),B.current&&clearTimeout(B.current),D.current&&clearInterval(D.current)}},[]);const _=()=>{G((0,v.h)({username:(0,b.sW)(),password:E})).then(e=>{N&&(P("Invalid Email or Password"),U.current.focus()),K?P("Please Wait We Are Validating The user..."):e.payload?(P("Login Successful"),L(!1),C(""),T(""),z(S),(0,b.hs)()):(P("Invalid Email or Password"),U.current.focus())})};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(a.A,{color:"inherit",elevation:2,children:(0,w.jsxs)(s.A,{sx:{justifyContent:"space-between",flexWrap:"wrap",ml:30},children:[(0,w.jsx)(o.A,{sx:{display:"flex",alignItems:"center",gap:2},children:(0,w.jsx)(i.A,{variant:"h6",fontWeight:"bold",color:"primary",children:"Thakur Eye Hospital"})}),(0,w.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:3},children:[(0,w.jsxs)(i.A,{variant:"subtitle1",sx:{fontWeight:500},children:["Current Time: ",t.toLocaleTimeString()," ||"]}),(0,w.jsxs)(i.A,{variant:"subtitle2",sx:{color:"#185a9d",fontWeight:500},children:["Your Logged IP Address: ",y," ||"]}),(0,w.jsxs)(i.A,{variant:"subtitle2",sx:{color:"#888",fontWeight:500},children:["Screen Lock-In: ",(Y=R,`${Math.floor(Y/60).toString().padStart(2,"0")} min:${(Y%60).toString().padStart(2,"0")} sec`)]})]}),(0,w.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",minWidth:120,justifyContent:"flex-end",gap:1},children:[(0,w.jsx)(i.A,{variant:"subtitle1",sx:{display:{xs:"none",sm:"block"}},children:"Welcome, "+(0,b.MN)()}),(0,w.jsx)(l.A,{color:"inherit",onClick:()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()},sx:{ml:1},children:(0,w.jsx)(f.A,{})}),(0,w.jsx)(c.A,{color:"inherit",startIcon:(0,w.jsx)(m.A,{}),onClick:async()=>{await localStorage.clear(),e("/")},sx:{textTransform:"none",ml:1},children:"Logout"})]})]})}),(0,w.jsxs)(x.A,{open:I,fullWidth:!0,maxWidth:"xs",PaperProps:{sx:{textAlign:"center",py:4}},children:[(0,w.jsx)(g.A,{sx:{fontSize:48,color:"#185a9d",mb:2}}),(0,w.jsx)(d.A,{sx:{fontWeight:700},children:"Session Locked"}),(0,w.jsxs)(h.A,{children:[(0,w.jsx)(i.A,{sx:{mb:2},children:"Please enter your password to unlock."}),(0,w.jsx)(p.A,{type:"password",label:"Password",inputRef:U,value:E,onChange:e=>{C(e.target.value),T("")},error:!!W,helperText:W,fullWidth:!0,autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&_()}})]}),(0,w.jsx)(u.A,{sx:{justifyContent:"center"},children:(0,w.jsx)(c.A,{variant:"contained",onClick:_,color:"primary",children:"Unlock"})}),H&&(0,w.jsx)(i.A,{color:N?"error.main":"success.main",variant:"body2",sx:{textAlign:"center",padding:"10px",textTransform:"capitalize"},children:H})]})]});var Y}},82806:(e,t,n)=>{e.exports=n.p+"static/media/logo.870334cf6e9a271377ab.png"},84879:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var r=n(53969),a=n(47228),s=n(17463),o=n(65043),i=n(78804),l=n(73216),c=n(70579);const x=e=>{let{element:t}=e;const n=(0,l.Zp)();(0,o.useEffect)(()=>{(0,i.Hm)()&&n("/")},[]);return(0,c.jsxs)(r.A,{sx:{minHeight:"100vh",background:"#f8fafc"},children:[(0,c.jsx)(a.A,{}),(0,c.jsxs)(r.A,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},width:"100%",minHeight:"100vh",pt:{xs:0,sm:"64px"}},children:[(0,c.jsx)(r.A,{sx:{width:{xs:70,sm:220},flexShrink:0,bgcolor:"#f0f0f0",minHeight:{xs:"auto",sm:"100vh"},zIndex:1200,position:{xs:"relative",sm:"fixed"},top:{xs:0,sm:64},left:0,boxShadow:{sm:4}},children:(0,c.jsx)(s.A,{onLogout:async()=>{await localStorage.clear(),n("/")}})}),(0,c.jsx)(r.A,{sx:{flexGrow:1,ml:{xs:0,sm:"220px"},mt:{xs:"30px",sm:"30px"},p:{xs:1.5,sm:3},minHeight:"calc(100vh - 64px)",transition:"margin 0.2s",width:{xs:"100%",sm:"calc(100% - 220px)"},background:"#f8fafc",borderRadius:{xs:0,sm:3},boxShadow:{xs:0,sm:2}},children:t})]})]})}}}]);
//# sourceMappingURL=879.0a1e9fce.chunk.js.map