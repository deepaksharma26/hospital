"use strict";(self.webpackChunktemh=self.webpackChunktemh||[]).push([[34],{12902:(e,a,s)=>{s.d(a,{a:()=>n});var l=s(53969),i=s(80172),t=s(28549),r=s(70579);const n=e=>{let{open:a,handleClose:s}=e;return(0,r.jsx)(t.A,{open:a,onClose:s,children:(0,r.jsxs)(l.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",p:4,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)(i.A,{}),(0,r.jsx)("p",{style:{marginTop:"16px"},children:"Loading data..."})]})})}},29034:(e,a,s)=>{s.r(a),s.d(a,{default:()=>E});var l=s(33023),i=s(81911),t=s(78776),r=s(30998),n=s(66154),d=s(10256),o=s(79067),u=s(84481),c=s(47471),m=s(85877),h=s(12097),x=s(83759),f=s(53969),v=s(55895),p=s(94799),A=s(32911),b=s(91449),g=s(65043),j=s(83003),w=s(12438),y=s(3388),C=s(53878),k=s(73216),S=s(12902),U=s(60637),N=s(61773),W=s(40146),I=s(70579);const L=e=>{let{open:a,handleClose:s,handleSubmit:x,form:f,setForm:v,roles:p,isEdit:A}=e;return(0,I.jsxs)(l.A,{open:a,onClose:s,maxWidth:"sm",fullWidth:!0,children:[(0,I.jsx)(i.A,{sx:{background:"linear-gradient(90deg, #43cea2 0%, #185a9d 100%)",color:"#fff"},children:A?"Update Existing User":"Add New User"}),(0,I.jsx)(t.A,{sx:{py:3},children:(0,I.jsxs)(r.A,{container:!0,spacing:2,sx:{width:"100%",mt:2},children:[(0,I.jsx)(r.A,{item:!0,xs:12,sm:6,children:(0,I.jsx)(n.A,{label:"First Name",name:"firstname",value:f.firstname,onChange:e=>v({...f,firstname:e.target.value}),fullWidth:!0,required:!0,variant:"outlined"})}),(0,I.jsx)(r.A,{item:!0,xs:12,sm:6,children:(0,I.jsx)(n.A,{label:"Last Name",name:"lastname",value:f.lastname,onChange:e=>v({...f,lastname:e.target.value}),fullWidth:!0,required:!0,variant:"outlined"})}),(0,I.jsx)(r.A,{item:!0,xs:12,sm:6,children:(0,I.jsx)(n.A,{label:"Email",name:"email",value:f.email,onChange:e=>v({...f,email:e.target.value}),fullWidth:!0,required:!0,variant:"outlined",type:"email"})}),(0,I.jsx)(r.A,{item:!0,xs:12,sm:6,children:(0,I.jsx)(n.A,{label:"Mobile",name:"mobilenumber",value:f.mobilenumber,onChange:e=>v({...f,mobilenumber:e.target.value}),fullWidth:!0,required:!0,variant:"outlined"})}),!A&&(0,I.jsx)(r.A,{item:!0,xs:12,sm:6,children:(0,I.jsx)(n.A,{label:"Password",name:"password",value:f.password,onChange:e=>v({...f,password:e.target.value}),fullWidth:!0,required:!0,variant:"outlined",type:"password"})}),(0,I.jsx)(r.A,{item:!0,xs:12,sm:6,children:(0,I.jsxs)(d.A,{fullWidth:!0,children:[(0,I.jsx)(o.A,{id:"role-label",children:"Role"}),(0,I.jsxs)(u.A,{labelId:"role-label",label:"Role",value:f.role,onChange:e=>v({...f,role:e.target.value}),required:!0,sx:{width:"150px"},children:[(0,I.jsx)(c.A,{value:"",children:"Select Role"}),p&&p.map(e=>(0,I.jsx)(c.A,{value:e._id,children:e.rolename},e._id))]})]})}),(0,I.jsx)(r.A,{item:!0,xs:12,sm:6,children:(0,I.jsxs)(d.A,{fullWidth:!0,children:[(0,I.jsx)(o.A,{id:"status-label",children:"Status"}),(0,I.jsxs)(u.A,{labelId:"status-label",label:"Status",value:f.status,onChange:e=>v({...f,status:e.target.value}),required:!0,sx:{width:"150px"},children:[(0,I.jsx)(c.A,{value:1,children:"Active"}),(0,I.jsx)(c.A,{value:9,children:"Inactive"})]})]})})]})}),(0,I.jsxs)(m.A,{sx:{px:3,pb:2},children:[(0,I.jsx)(h.A,{onClick:s,color:"secondary",variant:"outlined",children:"Cancel"}),(0,I.jsx)(h.A,{onClick:x,variant:"contained",color:"primary",startIcon:A?(0,I.jsx)(N.A,{}):(0,I.jsx)(W.A,{}),sx:{fontWeight:700,background:A?"linear-gradient(90deg, #f7971e 0%, #ffd200 100%)":"linear-gradient(90deg, #43cea2 0%, #185a9d 100%)",color:"#fff",boxShadow:2,"&:hover":{background:A?"linear-gradient(90deg, #ffd200 0%, #f7971e 100%)":"linear-gradient(90deg, #185a9d 0%, #43cea2 100%)"}},children:A?"Update":"Add"})]})]})},E=()=>{const{roles:e}=(0,j.d4)(e=>e.userRole),a=(0,j.d4)(e=>e.userList.data),{loading:s}=(0,j.d4)(e=>e.updateUser),l=(0,j.wA)(),[i,t]=((0,k.Zp)(),(0,g.useState)(!1)),[n,d]=(0,g.useState)(!1),[o,u]=(0,g.useState)({firstname:"",lastname:"",email:"",mobilenumber:"",password:"",role:"",status:1}),[c,m]=(0,g.useState)(!1),[N,W]=(0,g.useState)(null),[E,_]=(0,g.useState)({open:!1,message:"",severity:"success"});(0,g.useEffect)(()=>{l((0,w.P)({})),l((0,C.X)({}))},[l]);const q=()=>_({...E,open:!1}),M=[{field:"id",headerName:"ID",width:90},{field:"firstname",headerName:"First Name",width:150},{field:"lastname",headerName:"Last Name",width:150},{field:"email",headerName:"Email",width:150},{field:"mobilenumber",headerName:"Mobile",width:140},{field:"role",headerName:"Role",width:100},{field:"status",renderCell:e=>(0,I.jsx)(x.A,{sx:{width:80},label:e.value,color:"Active"==e.value?"success":"error"}),headerName:"Status",width:120},{field:"",renderCell:a=>{var s,l;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(h.A,{label:"Modify",variant:"outlined",color:"warning",onClick:()=>(a=>{var s;u({id:a._id,role:(null===(s=e.find(e=>e._id===a.role))||void 0===s?void 0:s._id)||a.role||"",firstname:a.firstname,lastname:a.lastname,email:a.email,mobilenumber:a.mobilenumber,password:"",status:"Active"===a.status||1===a.status?1:9}),m(!0),W(a._id),d(!0)})(a.row),children:"Modify"}),(0,I.jsx)(h.A,{label:"Modify",variant:"outlined",color:"Active"==(null===(s=a.row)||void 0===s?void 0:s.status)?"success":"error",onClick:()=>P(a),sx:{marginLeft:1},children:"Active"==(null===(l=a.row)||void 0===l?void 0:l.status)?"InActive":"Activate"})]})},headerName:"Modify",width:280}],R=a.map((e,a)=>{var s,l,i;return{...e,id:null!==(s=e.id)&&void 0!==s?s:a+1,role:null!==e&&void 0!==e&&null!==(l=e.role)&&void 0!==l&&l.rolename?null===e||void 0===e||null===(i=e.role)||void 0===i?void 0:i.rolename:"Unknown",status:1==e.status?"Active":"Inactive"}}),P=a=>{var s;const i=a.row,t="Active"===i.status?9:1,r={id:i._id,firstname:i.firstname,lastname:i.lastname,email:i.email,mobilenumber:i.mobilenumber,role:null===(s=e.find(e=>e.rolename==i.role))||void 0===s?void 0:s._id,status:t};l((0,U.TK)(r)).then(()=>{l((0,w.P)({})),_({open:!0,message:`User ${1===t?"activated":"deactivated"} successfully!`,severity:"success"})})};return(0,I.jsxs)(f.A,{sx:{width:"100%"},children:[(0,I.jsxs)(f.A,{sx:{display:"flex",border:"1px solid #ccc",backgroundColor:"#f5f5f5",padding:"10px",marginBottom:"20px"},children:[(0,I.jsx)(v.A,{variant:"h5",color:"textSecondary",children:"List of All Users"}),(0,I.jsx)(h.A,{variant:"contained",color:"primary",sx:{marginLeft:"auto"},onClick:()=>l((0,w.P)({})),children:"Refresh"}),(0,I.jsx)(h.A,{variant:"contained",color:"secondary",sx:{marginLeft:"10px"},onClick:()=>{u({firstname:"",lastname:"",email:"",mobilenumber:"",password:"",role:"",status:1}),m(!1),W(null),d(!0)},children:"Add User"}),(0,I.jsx)(h.A,{variant:"contained",color:"success",sx:{marginLeft:"10px"},onClick:()=>(()=>{const e="data:text/csv;charset=utf-8,"+M.map(e=>e.headerName).join(",")+"\n"+R.map(e=>M.map(a=>e[a.field]).join(",")).join("\n"),a=encodeURI(e),s=document.createElement("a");s.setAttribute("href",a),s.setAttribute("download","users.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)})(),children:"Export Users"})]}),(0,I.jsx)(r.A,{item:!0,xs:12,sx:{justifyContent:"center",display:"flex",marginTop:"20px"},children:(0,I.jsx)(p.A,{sx:{width:"100%"},children:(0,I.jsx)(y.z,{rows:R,columns:M,initialState:{pagination:{paginationModel:{pageSize:5,page:0}}},pageSizeOptions:[5,10],sx:{border:0,width:"100%"}})})}),(0,I.jsx)(L,{open:n,handleClose:()=>d(!1),handleSubmit:async e=>{e.preventDefault();try{c?l((0,U.TK)(o)).then(e=>{e.error?_({open:!0,message:"Update failed",severity:"error"}):(l((0,w.P)({})),u({firstname:"",lastname:"",email:"",mobilenumber:"",password:"",role:"",status:1}),_({open:!0,message:"User updated successfully!",severity:"success"}),m(!1),W(null))}):l((0,U.nu)(o)).then(e=>{e.error?_({open:!0,message:"User addition failed",severity:"error"}):(l((0,w.P)({})),u({firstname:"",lastname:"",email:"",mobilenumber:"",password:"",role:"",status:1}),_({open:!0,message:"User added successfully!",severity:"success"}))}),d(!1)}catch{_({open:!0,message:"Operation failed",severity:"error"})}},form:o,setForm:u,roles:e,isEdit:c}),(0,I.jsx)(A.A,{open:E.open,autoHideDuration:6e3,onClose:q,children:(0,I.jsx)(b.A,{onClose:q,severity:E.severity,sx:{width:"100%"},children:E.message})}),(0,I.jsx)(S.a,{open:i})]})}}}]);
//# sourceMappingURL=34.403eb43a.chunk.js.map