"use strict";(self.webpackChunktemh=self.webpackChunktemh||[]).push([[854],{17463:(e,t,n)=>{n.d(t,{A:()=>y});var a=n(65043),r=n(53969),l=n(47548),o=n(23182),i=n(95315),s=n(26529),d=n(42455),c=n(79801),h=n(66185),x=n(55895),u=n(87721),m=n(49982),p=n(39841),f=n(17105),g=n(91921),v=n(65767),A=n(73216),b=n(17193),j=n(70579);const w=[{label:"Dashboard",icon:(0,j.jsx)(u.A,{}),path:b.K.DASHBOARD,color:"#43cea2"},{label:"Users",icon:(0,j.jsx)(m.A,{}),path:b.K.LIST_ALL_USERS,color:"#ff9966"},{label:"Billing",icon:(0,j.jsx)(g.A,{}),path:b.K.BILLING,color:"#f7971e"},{label:"Billing Item",icon:(0,j.jsx)(p.A,{}),path:b.K.BILLING_ITEM,color:"#b91d73"},{label:"Billing Category",icon:(0,j.jsx)(p.A,{}),path:b.K.BILLING_CATEGORY,color:"#11998e"},{label:"Financial Year",icon:(0,j.jsx)(f.A,{}),path:b.K.FINANCIALYEAR,color:"#185a9d"},{label:"Logout",icon:(0,j.jsx)(v.A,{}),path:"/logout",logout:!0,color:"#ff5e62"}],y=e=>{let{onLogout:t}=e;const u=(0,A.Zp)(),m=(0,A.zy)(),[p,f]=(0,a.useState)(null);return(0,j.jsx)(r.A,{sx:{width:{xs:70,sm:220},flexShrink:0,top:0,left:0,marginTop:{xs:0,sm:"64px"},background:"linear-gradient(180deg, #f5f7fa 0%, #c3cfe2 100%)",minHeight:"100vh",boxShadow:4,position:"fixed",zIndex:1200,height:"100vh",overflow:"hidden"},children:(0,j.jsxs)(l.Ay,{variant:"permanent",sx:{width:{xs:70,sm:220},flexShrink:0,top:0,position:"relative","& .MuiDrawer-paper":{width:{xs:70,sm:220},boxSizing:"border-box",background:"linear-gradient(180deg, #f5f7fa 0%, #c3cfe2 100%)",borderRight:"none",boxShadow:4,overflow:"hidden"},display:{xs:"block",sm:"block"}},children:[(0,j.jsx)(r.A,{sx:{marginTop:"10px",marginLeft:{xs:"auto",sm:"30px"},alignItems:"center",minWidth:60,height:"50px",display:"flex",justifyContent:{xs:"center",sm:"flex-start"}},children:(0,j.jsx)("img",{src:n(82806),alt:"User Icon",style:{width:48,height:48,filter:"drop-shadow(0 2px 8px #43cea2)",display:"block"}})}),(0,j.jsx)(o.A,{sx:{display:{xs:"none",sm:"block"}}}),(0,j.jsxs)(r.A,{sx:{overflow:"hidden",marginTop:{xs:0,sm:"-62px"},width:"100%"},children:[(0,j.jsx)(r.A,{sx:{height:"2px",borderBottom:"1px solid #CECECE",width:"100%"}}),(0,j.jsx)(i.A,{sx:{p:0},children:w.map((e,n)=>(0,j.jsx)(a.Fragment,{children:(0,j.jsx)(s.A,{title:e.label,placement:"right",arrow:!0,children:(0,j.jsxs)(d.Ay,{button:!0,onClick:()=>(e=>{e.logout?t():u(e.path)})(e),selected:m.pathname===e.path,onMouseEnter:()=>f(n),onMouseLeave:()=>f(null),sx:{position:"relative",color:m.pathname===e.path?"#fff":"text.primary",background:m.pathname===e.path?`linear-gradient(90deg, ${e.color} 0%, #185a9d 100%)`:p===n?"rgba(67,206,162,0.08)":"transparent",padding:{xs:"10px 8px",sm:"12px 24px"},margin:{xs:"4px 0",sm:"6px 0"},borderRadius:2,boxShadow:m.pathname===e.path?3:0,transition:"all 0.2s",minWidth:0,cursor:"pointer","&:active":{transform:"scale(0.98)"},"&:focus":{outline:"none",boxShadow:"0 0 0 2px rgba(67,206,162,0.5)"},"&:focus-visible":{boxShadow:"0 0 0 2px rgba(67,206,162,0.5)"},"&:active, &:hover":{background:m.pathname===e.path?`linear-gradient(90deg, ${e.color} 0%, #185a9d 100%)`:p===n?"rgba(67,206,162,0.08)":"transparent",color:m.pathname===e.path||p===n?"#fff":"text.primary"},"&:focus, &:hover":{background:m.pathname===e.path?`linear-gradient(90deg, ${e.color} 0%, #185a9d 100%)`:p===n?"rgba(67,206,162,0.08)":"transparent",color:m.pathname===e.path||p===n?"#fff":"text.primary"},"&:active, &:focus, &:hover":{boxShadow:m.pathname===e.path||p===n?2:0,transform:m.pathname===e.path||p===n?"scale(1.03)":"none"},"&:hover":{background:`linear-gradient(90deg, ${e.color} 0%, #185a9d 100%)`,color:"#fff",boxShadow:2,transform:"scale(1.03)"}},children:[(0,j.jsx)(c.A,{sx:{color:m.pathname===e.path||p===n?e.color:"#888",minWidth:0,mr:{xs:0,sm:2},justifyContent:"center",fontSize:24,filter:m.pathname===e.path||p===n?"drop-shadow(0 2px 8px #43cea2)":"none"},children:e.icon}),(0,j.jsx)(h.A,{primary:(0,j.jsx)(x.A,{sx:{fontWeight:700,fontSize:16,letterSpacing:.5,color:m.pathname===e.path||p===n?"#fff":"#222",textShadow:m.pathname===e.path||p===n?"0 2px 8px #43cea2":"none",transition:"color 0.2s",display:{xs:"none",sm:"block"}},children:e.label})})]})})},e.label))})]})]})})}},47228:(e,t,n)=>{n.d(t,{A:()=>S});var a=n(65043),r=n(26887),l=n(23182),o=n(53969),i=n(55895),s=n(56647),d=n(12097),c=n(38517),h=n(81911),x=n(78776),u=n(24343),m=n(85877),p=n(65767),f=n(8888),g=n(97250),v=n(78804),A=n(73216),b=n(83003),j=n(87018),w=n(70579);const y=900,S=()=>{const e=(0,A.Zp)(),[t,n]=(0,a.useState)(new Date),[S,C]=(0,a.useState)("Fetching..."),[k,I]=(0,a.useState)((0,v.me)()),[W,F]=(0,a.useState)(""),[L,E]=(0,a.useState)(""),[T,N]=(0,a.useState)(y),B=(0,a.useRef)(null),D=(0,a.useRef)(null),{data:P}=(0,b.d4)(e=>e.users),[R,z]=(0,a.useState)(""),[M,$]=(0,a.useState)(!1),[K,_]=(0,a.useState)(null),G=(0,b.wA)(),H=(0,a.useRef)(null);(0,a.useEffect)(()=>{const e=setInterval(()=>n(new Date),1e3);return()=>clearInterval(e)},[]),(0,a.useEffect)(()=>{fetch("https://api.ipify.org?format=json").then(e=>e.json()).then(e=>C(e.ip)).catch(()=>C("Unavailable"))},[]),(0,a.useEffect)(()=>{const e=()=>{N(y),B.current&&clearTimeout(B.current),D.current&&clearInterval(D.current),D.current=setInterval(()=>{N(e=>e<=1?(clearInterval(D.current),(0,v.S_)(!0),I(!0),0):e-1)},1e3),B.current=setTimeout(()=>{I(!0),clearInterval(D.current)},9e5)},t=["mousemove","keydown","mousedown","touchstart","scroll"];return t.forEach(t=>window.addEventListener(t,e)),e(),()=>{t.forEach(t=>window.removeEventListener(t,e)),B.current&&clearTimeout(B.current),D.current&&clearInterval(D.current)}},[]);const O=()=>{G((0,j.h)({username:(0,v.sW)(),password:W})).then(e=>{K&&(z("Invalid Email or Password"),H.current.focus()),M?z("Please Wait We Are Validating The user..."):e.payload?(z("Login Successful"),I(!1),F(""),E(""),N(y),(0,v.hs)()):(z("Invalid Email or Password"),H.current.focus())})};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(r.A,{color:"inherit",elevation:2,children:(0,w.jsxs)(l.A,{sx:{justifyContent:"space-between",flexWrap:"wrap",ml:30},children:[(0,w.jsx)(o.A,{sx:{display:"flex",alignItems:"center",gap:2},children:(0,w.jsx)(i.A,{variant:"h6",fontWeight:"bold",color:"primary",children:"Thakur Eye Hospital"})}),(0,w.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:3},children:[(0,w.jsxs)(i.A,{variant:"subtitle1",sx:{fontWeight:500},children:["Current Time: ",t.toLocaleTimeString()," ||"]}),(0,w.jsxs)(i.A,{variant:"subtitle2",sx:{color:"#185a9d",fontWeight:500},children:["Your Logged IP Address: ",S," ||"]}),(0,w.jsxs)(i.A,{variant:"subtitle2",sx:{color:"#888",fontWeight:500},children:["Screen Lock-In: ",(U=T,`${Math.floor(U/60).toString().padStart(2,"0")} min:${(U%60).toString().padStart(2,"0")} sec`)]})]}),(0,w.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",minWidth:120,justifyContent:"flex-end",gap:1},children:[(0,w.jsx)(i.A,{variant:"subtitle1",sx:{display:{xs:"none",sm:"block"}},children:"Welcome, "+(0,v.MN)()}),(0,w.jsx)(s.A,{color:"inherit",onClick:()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()},sx:{ml:1},children:(0,w.jsx)(f.A,{})}),(0,w.jsx)(d.A,{color:"inherit",startIcon:(0,w.jsx)(p.A,{}),onClick:async()=>{await localStorage.clear(),e("/")},sx:{textTransform:"none",ml:1},children:"Logout"})]})]})}),(0,w.jsxs)(c.A,{open:k,fullWidth:!0,maxWidth:"xs",PaperProps:{sx:{textAlign:"center",py:4}},children:[(0,w.jsx)(g.A,{sx:{fontSize:48,color:"#185a9d",mb:2}}),(0,w.jsx)(h.A,{sx:{fontWeight:700},children:"Session Locked"}),(0,w.jsxs)(x.A,{children:[(0,w.jsx)(i.A,{sx:{mb:2},children:"Please enter your password to unlock."}),(0,w.jsx)(u.A,{type:"password",label:"Password",inputRef:H,value:W,onChange:e=>{F(e.target.value),E("")},error:!!L,helperText:L,fullWidth:!0,autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&O()}})]}),(0,w.jsx)(m.A,{sx:{justifyContent:"center"},children:(0,w.jsx)(d.A,{variant:"contained",onClick:O,color:"primary",children:"Unlock"})}),R&&(0,w.jsx)(i.A,{color:K?"error.main":"success.main",variant:"body2",sx:{textAlign:"center",padding:"10px",textTransform:"capitalize"},children:R})]})]});var U}},63854:(e,t,n)=>{n.r(t),n.d(t,{default:()=>F});var a=n(55895),r=n(53969),l=n(12097),o=n(53089),i=n(91244),s=n(94799),d=(n(47228),n(17463),n(65043)),c=n(78804),h=n(75023),x=n(5251),u=n(45297),m=n(70095),p=n(80379),f=n(59002),g=n(17869),v=n(24177),A=n(18020),b=n(83003),j=n(16679),w=n(17193),y=n(75067),S=n(73216),C=n(70579);const k=[{name:"Consultation",value:4e3},{name:"Surgery",value:3e3},{name:"Medicine",value:2e3},{name:"Other",value:1500}],I=["#0088FE","#00C49F","#FFBB28","#533eaeff","#533eaeff","#ff8042","#d32f2f","#1976d2","#388e3c","#f57c00","#7b1fa2"];var W=0;const F=e=>{var t,n,F,L,E,T;let{element:N}=e;const[B,D]=(0,d.useState)(!1),{dashboardData:P}=(0,b.d4)(e=>e.dashboard),R=(0,b.wA)(),z=(0,S.Zp)();(0,d.useEffect)(()=>{(0,c.Hm)()&&z("/"),R((0,j.H)())},[]);const M=[{title:`Today's Sales - ${null!==(t=null===P||void 0===P||null===(n=P.today)||void 0===n?void 0:n.count)&&void 0!==t?t:0}`,value:`\u20b9${parseFloat(null!==(F=null===P||void 0===P||null===(L=P.today)||void 0===L?void 0:L.sum)&&void 0!==F?F:0).toFixed(2)}`,icon:(0,C.jsx)(u.A,{fontSize:"large"}),gradient:"linear-gradient(90deg, #43cea2 0%, #185a9d 100%)"},...Array.isArray(null===P||void 0===P?void 0:P.todayByPaymentType)?P.todayByPaymentType.map(e=>{var t;return{title:e._id,value:`\u20b9${parseFloat(null!==(t=e.sum)&&void 0!==t?t:0).toFixed(2)}`,icon:(0,C.jsx)(y.A,{fontSize:"large"}),gradient:`linear-gradient(90deg, ${I[W++]} 0%, #185a9d 100%)`}}):[],{title:"Month Revenue",value:`\u20b9${parseFloat(null!==(E=null===P||void 0===P||null===(T=P.month)||void 0===T?void 0:T.sum)&&void 0!==E?E:0).toFixed(2)}`,icon:(0,C.jsx)(x.A,{fontSize:"large"}),gradient:"linear-gradient(90deg, #f953c6 0%, #b91d73 100%)"}],$=[{field:"userId",headerName:"Customer ID",width:150,renderCell:e=>(0,C.jsx)(a.A,{variant:"subtitle1",color:"textSecondary",children:e.value||"N/A"})},{field:"customerName",headerName:"Customer Name",width:150,renderCell:e=>(0,C.jsx)(a.A,{variant:"subtitle1",color:"textSecondary",children:e.value||"N/A"})},{field:"customerPhone",headerName:"Phone",width:100,renderCell:e=>(0,C.jsx)(a.A,{variant:"subtitle1",color:"textSecondary",children:e.value||"N/A"})},{field:"customerAddress",headerName:"Address",width:150,renderCell:e=>(0,C.jsx)(a.A,{variant:"subtitle1",color:"textSecondary",children:e.value||"N/A"})},{field:"taxAmount",headerName:"Tax",width:90,renderCell:e=>(0,C.jsx)(a.A,{variant:"subtitle1",fontWeight:"bold",color:"textSecondary",children:e.value?e.value.toFixed(2):"0.00"})},{field:"discountAmount",headerName:"Discount",width:90,renderCell:e=>(0,C.jsx)(a.A,{variant:"subtitle1",fontWeight:"bold",color:"textSecondary",children:e.value?e.value.toFixed(2):"0.00"})},{field:"totalAmount",headerName:"Total Amount",renderCell:e=>(0,C.jsx)(a.A,{variant:"subtitle1",fontWeight:"bold",color:"textSecondary",children:e.value?e.value.toFixed(2):"0.00"}),width:90},{field:"finalAmount",headerName:"Final Amount",renderCell:e=>(0,C.jsx)(a.A,{variant:"subtitle1",fontWeight:"bold",color:"textSecondary",children:e.value?e.value.toFixed(2):"0.00"}),width:90},{field:"paymentMethodDetails",headerName:"Payment Method",width:150,renderCell:e=>(0,C.jsx)(a.A,{variant:"subtitle1",color:"textSecondary",children:e.value||"N/A"})},{field:"",renderCell:e=>(0,C.jsxs)(r.A,{sx:{display:"flex",gap:1},children:[(0,C.jsx)(l.A,{label:"Modify",variant:"outlined",color:"warning",size:"small",onClick:()=>window.open(`${w.K.EDITBILLING}/${e.row._id}`,"_blank"),sx:{fontWeight:600},children:"Modify"}),(0,C.jsx)(l.A,{label:"Print",variant:"outlined",color:"primary",size:"small",sx:{fontWeight:600},onClick:()=>K(e.row),children:"Print"})]}),headerName:"Modify",width:200}],K=e=>{D(e)};return(0,C.jsx)(o.A,{container:!0,sx:{width:"100%",m:0,p:0,overflow:"hidden"},children:(0,C.jsx)(o.A,{item:!0,xs:12,children:(0,C.jsxs)(r.A,{sx:{flexGrow:1,p:{xs:1,sm:2,md:3},width:"100%",maxWidth:"100vw",overflow:"hidden",boxSizing:"border-box"},children:[(0,C.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,flexDirection:"column",width:"100%",overflow:"hidden"},children:[(0,C.jsx)(r.A,{children:(0,C.jsx)(a.A,{variant:"h3",fontWeight:"bold",sx:{background:"linear-gradient(90deg, #43cea2 0%, #185a9d 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textAlign:"center",fontSize:{xs:"2rem",sm:"2.5rem",md:"3rem"},wordBreak:"break-word"},children:"Thakur Eye Hospital Billing Dashboard"})}),(0,C.jsx)(r.A,{sx:{display:"flex",gap:{xs:1,sm:2},mt:4,mb:4,flexWrap:"wrap",justifyContent:"center",width:"100%"},children:M.map((e,t)=>(0,C.jsxs)(i.A,{sx:{minWidth:160,maxWidth:220,color:"#fff",background:e.gradient,boxShadow:3,borderRadius:3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",px:2,py:2,m:1,flex:"1 1 160px"},children:[(0,C.jsx)(r.A,{sx:{mb:1},children:e.icon}),(0,C.jsx)(a.A,{variant:"subtitle2",sx:{opacity:.9,textAlign:"center"},children:e.title}),(0,C.jsx)(a.A,{variant:"h5",fontWeight:"bold",children:e.value})]},t))})]}),(0,C.jsxs)(o.A,{container:!0,spacing:3,sx:{width:"100%",m:0},children:[(0,C.jsx)(o.A,{item:!0,xs:12,md:7,children:(0,C.jsxs)(s.A,{sx:{p:2,boxShadow:2,overflow:"hidden"},children:[(0,C.jsx)(a.A,{variant:"h6",fontWeight:"bold",sx:{mb:2},children:"Today's Last 10 Billed Report"}),(0,C.jsx)(r.A,{sx:{height:320,width:"100%",overflow:"hidden"},children:(0,C.jsx)(h.z,{rows:((null===P||void 0===P?void 0:P.last10)||[]).map((e,t)=>{var n,a;return{...e,id:null!==(n=null!==(a=e.id)&&void 0!==a?a:e._id)&&void 0!==n?n:t+1}}),columns:$,pageSize:5,rowsPerPageOptions:[5,10,20],disableSelectionOnClick:!0,hideFooterSelectedRowCount:!0,sx:{border:0,".MuiDataGrid-virtualScroller":{overflow:"hidden !important"},".MuiDataGrid-main":{overflow:"hidden !important"}}})})]})}),(0,C.jsx)(o.A,{item:!0,xs:12,md:5,children:(0,C.jsxs)(s.A,{sx:{p:2,boxShadow:2,height:"100%",overflow:"hidden"},children:[(0,C.jsx)(a.A,{variant:"h6",fontWeight:"bold",sx:{mb:2},children:"Month Report (Revenue by Category)"}),(0,C.jsx)(f.u,{width:"100%",height:250,children:(0,C.jsxs)(A.r,{children:[(0,C.jsx)(v.F,{data:k,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:t,percent:n}=e;return`${t}: ${(100*n).toFixed(0)}%`},outerRadius:90,fill:"#8884d8",dataKey:"value",children:k.map((e,t)=>(0,C.jsx)(g.f,{fill:I[t%I.length]},`cell-${t}`))}),(0,C.jsx)(p.m,{}),(0,C.jsx)(m.s,{})]})})]})})]})]})})})}},82806:(e,t,n)=>{e.exports=n.p+"static/media/logo.870334cf6e9a271377ab.png"}}]);
//# sourceMappingURL=854.4b01d4a3.chunk.js.map