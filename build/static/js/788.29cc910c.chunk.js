"use strict";(self.webpackChunktemh=self.webpackChunktemh||[]).push([[788],{98788:(e,r,i)=>{i.r(r),i.d(r,{default:()=>k});var o=i(65043),t=i(85030),a=i(56647),n=i(53969),s=i(94799),l=i(55895),d=i(12097),c=i(53089),f=i(24343),g=i(38517),h=i(81911),u=i(78776),x=i(85877),m=i(32911),p=i(91449),b=i(75023),y=i(61773),A=i(5362),j=i(40146),v=i(83003),C=i(88998),w=(i(61066),i(26004),i(70579));const k=()=>{const[e,r]=(0,o.useState)([]),[i,k]=(0,o.useState)({id:"",name:"",description:""}),[S,W]=(0,o.useState)(null),[D,I]=(0,o.useState)(!1),[R,z]=(0,o.useState)(null),[N,P]=(0,o.useState)({open:!1,message:"",severity:"success"}),B=(0,v.wA)(),{billingCategory:H}=(0,v.d4)(e=>e.billingCategory);(0,o.useEffect)(()=>{B((0,C.ss)()).then(e=>{e.payload?r(e.payload):console.error("Failed to fetch categories:",e.error)})},[B]);const M=e=>{k({...i,[e.target.name]:e.target.value})},F=[{field:"name",headerName:"Category Name",flex:1,minWidth:180},{field:"description",headerName:"Description",flex:2,minWidth:220},{field:"isActive",headerName:"Status",flex:2,minWidth:120,renderCell:e=>(0,w.jsx)(t.A,{checked:e.row.isActive,color:e.row.isActive?"success":"error"})},{field:"actions",headerName:"Actions",width:140,sortable:!1,renderCell:e=>(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(a.A,{color:"primary",onClick:()=>{return r=e.row,k({id:r._id,name:r.name,description:r.description}),W(r._id),void window.scrollTo({top:0,behavior:"smooth"});var r},children:(0,w.jsx)(y.A,{})}),(0,w.jsx)(a.A,{color:"error",onClick:()=>z(e.row._id),children:(0,w.jsx)(A.A,{})})]})}];return(0,w.jsxs)(n.A,{sx:{width:"100%",minHeight:"100vh",background:"#f8fafc",py:{xs:1,sm:3}},children:[(0,w.jsxs)(s.A,{elevation:4,sx:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",p:{xs:2,sm:3},mb:4,borderRadius:3,background:"linear-gradient(90deg, #43cea2 0%, #185a9d 100%)",color:"#fff",boxShadow:6},children:[(0,w.jsx)(l.A,{variant:"h5",fontWeight:"bold",sx:{letterSpacing:1},children:"\ud83d\uddc2\ufe0f Manage Billing Categories"}),(0,w.jsx)(d.A,{variant:"contained",color:"secondary",sx:{fontWeight:700,background:"linear-gradient(90deg, #ff9966 0%, #ff5e62 100%)",color:"#fff",boxShadow:2,ml:"auto","&:hover":{background:"linear-gradient(90deg, #ff5e62 0%, #ff9966 100%)"}},onClick:()=>B((0,C.ss)({})),children:"Refresh"})]}),(0,w.jsxs)(n.A,{sx:{maxWidth:900,mx:"auto",p:{xs:1,sm:2},width:"100%"},children:[(0,w.jsxs)(s.A,{sx:{p:3,mb:4,background:"linear-gradient(90deg, #43cea2 0%, #185a9d 100%)",color:"#fff",borderRadius:3,boxShadow:4},children:[(0,w.jsx)(l.A,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:S?"Update Billing Category":"Create Billing Category"}),(0,w.jsx)("form",{onSubmit:async e=>{e.preventDefault();try{S?B((0,C.Vh)(i)).then(()=>{B((0,C.ss)()),P({open:!0,message:"Category updated!",severity:"success"})}):B((0,C.WM)(i)).then(()=>{B((0,C.ss)()),P({open:!0,message:"Category created!",severity:"success"})}),k({name:"",description:""}),W(null)}catch(r){P({open:!0,message:"Operation failed",severity:"error"})}},children:(0,w.jsxs)(c.A,{container:!0,spacing:2,alignItems:"center",children:[(0,w.jsx)(c.A,{item:!0,xs:12,sm:5,children:(0,w.jsx)(f.A,{label:"Category Name",name:"name",value:i.name,onChange:M,fullWidth:!0,required:!0,variant:"filled",InputProps:{style:{background:"rgba(255,255,255,0.15)",borderRadius:8,color:"#fff",fontWeight:600}},InputLabelProps:{style:{color:"#fff"}},sx:{input:{color:"#fff",fontWeight:600},label:{color:"#fff"}}})}),(0,w.jsx)(c.A,{item:!0,xs:12,sm:5,children:(0,w.jsx)(f.A,{label:"Description",name:"description",value:i.description,onChange:M,fullWidth:!0,variant:"filled",InputProps:{style:{background:"rgba(255,255,255,0.15)",borderRadius:8,color:"#fff"}},InputLabelProps:{style:{color:"#fff"}},sx:{input:{color:"#fff"},label:{color:"#fff"}}})}),(0,w.jsx)(c.A,{item:!0,xs:12,sm:2,children:(0,w.jsx)(d.A,{type:"submit",variant:"contained",color:S?"warning":"secondary",startIcon:(0,w.jsx)(j.A,{}),fullWidth:!0,sx:{height:56,fontWeight:700,fontSize:16,background:S?"linear-gradient(90deg, #f7971e 0%, #ffd200 100%)":"linear-gradient(90deg, #ff9966 0%, #ff5e62 100%)",color:"#fff",boxShadow:2,"&:hover":{background:S?"linear-gradient(90deg, #ffd200 0%, #f7971e 100%)":"linear-gradient(90deg, #ff5e62 0%, #ff9966 100%)"}},children:S?"Update":"Create"})})]})})]}),(0,w.jsxs)(s.A,{sx:{p:2,borderRadius:3,boxShadow:2,background:"#fff",mb:4},children:[(0,w.jsx)(l.A,{variant:"h6",fontWeight:"bold",sx:{mb:2,color:"#185a9d"},children:"Billing Categories"}),(0,w.jsx)("div",{style:{width:"100%",minHeight:350},children:(0,w.jsx)(b.z,{rows:H,columns:F,getRowId:e=>e._id,pageSize:7,rowsPerPageOptions:[7,15,30],autoHeight:!0,disableSelectionOnClick:!0,sx:{background:"rgba(255,255,255,0.97)",borderRadius:2,"& .MuiDataGrid-columnHeaders":{background:"linear-gradient(90deg, #43cea2 0%, #185a9d 100%)",fontWeight:700,fontSize:16},"& .MuiDataGrid-row:hover":{background:"rgba(67,206,162,0.08)"},"& .MuiDataGrid-cell":{fontSize:15}}})})]}),(0,w.jsxs)(g.A,{open:!!R,onClose:()=>z(null),children:[(0,w.jsx)(h.A,{children:"Delete Category?"}),(0,w.jsx)(u.A,{children:"Are you sure you want to delete this billing category? This action cannot be undone."}),(0,w.jsxs)(x.A,{children:[(0,w.jsx)(d.A,{onClick:()=>z(null),color:"primary",children:"Cancel"}),(0,w.jsx)(d.A,{onClick:async()=>{B((0,C.Tr)(R)).then(e=>{e.error?P({open:!0,message:"Failed to delete category",severity:"error"}):(P({open:!0,message:"Category deleted!",severity:"success"}),z(null),B((0,C.ss)()))}).catch(e=>{P({open:!0,message:"Failed to delete category",severity:"error"})})},color:"error",variant:"contained",children:"Delete"})]})]}),(0,w.jsx)(m.A,{open:N.open,autoHideDuration:3e3,onClose:()=>P({...N,open:!1}),anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,w.jsx)(p.A,{severity:N.severity,sx:{width:"100%"},children:N.message})})]})]})}}}]);
//# sourceMappingURL=788.29cc910c.chunk.js.map